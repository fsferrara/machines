#! /usr/bin/env bash

# ###############################################################
# Help
usage() {
   echo -e "\nusage: $0 [-h] [-d <dependency name>]\n";
}

# ###############################################################
# Retrieve options
DEPENDENCY="";
while getopts :d:h opt; do
   case $opt in
      d)
         DEPENDENCY=${OPTARG};
         ;;
      h)
         usage;
         exit 0;
         ;;
      \?)
         usage;
         exit 1;
         ;;
   esac
done


# ###############################################################
# Global variables
XCODE_PRJ_EXTENSION='*.pbxproj'
DEPENDENCY_NAME="${DEPENDENCY}"

find . -iname "${XCODE_PRJ_EXTENSION}" | xargs -I %file% grep -HE -A3 "repository.*${DEPENDENCY_NAME}" %file%
